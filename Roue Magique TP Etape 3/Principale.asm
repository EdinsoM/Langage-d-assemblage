		

;************************************************************************
	THUMB	
	REQUIRE8
	PRESERVE8
;************************************************************************

	include REG_UTILES.inc


;************************************************************************
; 					IMPORT/EXPORT Système
;************************************************************************

	IMPORT ||Lib$$Request$$armlib|| [CODE,WEAK]




; IMPORT/EXPORT de procédure           

	IMPORT 	Init_Cible

	EXPORT main
	
;*******************************************************************************


;*******************************************************************************
	AREA  mesdonnees, data, readwrite, align = 9
		
TVI space 1024 ;4*(N+1)? soit N = 256 (on va copier toute la table)
		
;*******************************************************************************
	
	AREA  moncode, code, readonly
		
;*******************************************************************************
; Procédure principale et point d'entrée du projet
;*******************************************************************************
main  	PROC 
;*******************************************************************************

		MOV R0,#2
		BL Init_Cible;
		
		LDR R0, =TVI
		LDR R1, =SCB_VTOR
		STR R0, [R1]
		
		LDR R1, =0x00000000
		MOV R2, #0
		
CopierTVI
		STR R1, [R0], #4
		ADD R1, R1, #1
		ADD R2, R2, #1
		CMP R2, #256
		BNE CopierTVI
		
		ENDP		
	END

;*******************************************************************************
